<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="966px" preserveAspectRatio="none" style="width:1128px;height:966px;" version="1.1" viewBox="0 0 1128 966" width="1128px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kuzinzv08wkq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1kuzinzv08wkq)" height="570.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="765" y="336.8203"/><rect fill="#FFFFFF" filter="url(#f1kuzinzv08wkq)" height="89.5625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1030.5" y="665.5781"/><rect fill="#FFFFFF" filter="url(#f1kuzinzv08wkq)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="419.5" x="13" y="55.2969"/><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="601.5" y="225.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="608.5" y="245.0889">runtime</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="723" y="270.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="730" y="290.3857">Firecracker</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="827" y="344.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="834" y="364.8154">agent</text><rect fill="#FFFFFF" filter="url(#f1kuzinzv08wkq)" height="424.2891" style="stroke: #000000; stroke-width: 2.0;" width="1104" x="13" y="426.25"/><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="964" y="634.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="971" y="654.4404">container process</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="74" x2="74" y1="38.2969" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="234.5" x2="234.5" y1="38.2969" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="371.5" x2="371.5" y1="38.2969" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="488.5" x2="488.5" y1="38.2969" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="636.5" x2="636.5" y1="257.7422" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="770" x2="770" y1="303.0391" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="856" x2="856" y1="377.4688" y2="925.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1035" x2="1035" y1="667.0938" y2="925.8047"/><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="30" y="22.9951">orchestrator</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="23" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="30" y="944.7998">orchestrator</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="188.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="195.5" y="22.9951">containerd</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="188.5" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="195.5" y="944.7998">containerd</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="320.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="327.5" y="22.9951">snapshotter</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="320.5" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="327.5" y="944.7998">snapshotter</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="432.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="439.5" y="22.9951">control plugin</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="432.5" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="439.5" y="944.7998">control plugin</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="601.5" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="608.5" y="944.7998">runtime</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="723" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="730" y="944.7998">Firecracker</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="827" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="834" y="944.7998">agent</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="964" y="924.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="971" y="944.7998">container process</text><rect fill="#FFFFFF" filter="url(#f1kuzinzv08wkq)" height="570.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="765" y="336.8203"/><rect fill="#FFFFFF" filter="url(#f1kuzinzv08wkq)" height="89.5625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1030.5" y="665.5781"/><path d="M13,55.2969 L90,55.2969 L90,62.2969 L80,72.2969 L13,72.2969 L13,55.2969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="419.5" x="13" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="68.3638">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="105" y="67.5073">["for each container"]</text><polygon fill="#A80036" points="222.5,89.5625,232.5,93.5625,222.5,97.5625,226.5,93.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74.5" x2="228.5" y1="93.5625" y2="93.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="81.5" y="88.4966">prepare snapshot</text><polygon fill="#A80036" points="359.5,118.6953,369.5,122.6953,359.5,126.6953,363.5,122.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="365.5" y1="122.6953" y2="122.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="241.5" y="117.6294">prepare snapshot</text><polygon fill="#A80036" points="245.5,147.8281,235.5,151.8281,245.5,155.8281,241.5,151.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="239.5" x2="370.5" y1="151.8281" y2="151.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="251.5" y="146.7622">snapshot $foo</text><polygon fill="#A80036" points="85.5,176.9609,75.5,180.9609,85.5,184.9609,81.5,180.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79.5" x2="233.5" y1="180.9609" y2="180.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="91.5" y="175.895">snapshot $foo</text><polygon fill="#A80036" points="476.5,213.0938,486.5,217.0938,476.5,221.0938,480.5,217.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74.5" x2="482.5" y1="217.0938" y2="217.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="81.5" y="212.0278">create VM $id</text><polygon fill="#A80036" points="589.5,242.2266,599.5,246.2266,589.5,250.2266,593.5,246.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="595.5" y1="246.2266" y2="246.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="495.5" y="241.1606">launch VM $id</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="601.5" y="225.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="608.5" y="245.0889">runtime</text><polygon fill="#A80036" points="711,287.5234,721,291.5234,711,295.5234,715,291.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="717" y1="291.5234" y2="291.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="644" y="286.4575">launch</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="723" y="270.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="730" y="290.3857">Firecracker</text><polygon fill="#A80036" points="753,332.8203,763,336.8203,753,340.8203,757,336.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="759" y1="336.8203" y2="336.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="644" y="331.7544">configure &amp; boot</text><polygon fill="#A80036" points="648,361.9531,638,365.9531,648,369.9531,644,365.9531" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="815,361.9531,825,365.9531,815,369.9531,819,365.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="821" y1="365.9531" y2="365.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="654" y="360.8872">connect</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="827" y="344.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="834" y="364.8154">agent</text><polygon fill="#A80036" points="85.5,407.25,75.5,411.25,85.5,415.25,81.5,411.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79.5" x2="487.5" y1="411.25" y2="411.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="91.5" y="406.1841">VM $id running</text><path d="M13,426.25 L90,426.25 L90,433.25 L80,443.25 L13,443.25 L13,426.25 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="424.2891" style="stroke: #000000; stroke-width: 2.0;" width="1104" x="13" y="426.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="439.3169">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="105" y="438.4604">["for each container"]</text><polygon fill="#A80036" points="222.5,490.7813,232.5,494.7813,222.5,498.7813,226.5,494.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74.5" x2="228.5" y1="494.7813" y2="494.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="81.5" y="459.4497">run container</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="81.5" y="474.5825">$bar with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="81.5" y="489.7153">snapshot $foo</text><polygon fill="#A80036" points="625,519.9141,635,523.9141,625,527.9141,629,523.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="631" y1="523.9141" y2="523.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="241.5" y="518.8481">run container $bar with snapshot $foo</text><polygon fill="#A80036" points="753,564.1797,763,568.1797,753,572.1797,757,568.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="759" y1="568.1797" y2="568.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="644" y="547.981">attach snapshot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="644" y="563.1138">$foo as device</text><polygon fill="#A80036" points="844,593.3125,854,597.3125,844,601.3125,848,597.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="850" y1="597.3125" y2="597.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="644" y="592.2466">mount snapshot $foo</text><polygon fill="#A80036" points="844,622.4453,854,626.4453,844,630.4453,848,626.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637" x2="850" y1="626.4453" y2="626.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="644" y="621.3794">run container $bar</text><polygon fill="#A80036" points="952,651.5781,962,655.5781,952,659.5781,956,655.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="856" x2="958" y1="655.5781" y2="655.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="863" y="650.5122">start process</text><rect fill="#FEFECE" filter="url(#f1kuzinzv08wkq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="964" y="634.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="971" y="654.4404">container process</text><path d="M903,684.7422 L903,739.7422 L1021,739.7422 L1021,694.7422 L1011,684.7422 L903,684.7422 " fill="#FBFB77" filter="url(#f1kuzinzv08wkq)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1011,684.7422 L1011,694.7422 L1021,694.7422 L1011,684.7422 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="909" y="701.8091">After some</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="909" y="716.9419">time, container</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="909" y="732.0747">process exits</text><polygon fill="#A80036" points="867,751.1406,857,755.1406,867,759.1406,863,755.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="861" x2="1034.5" y1="755.1406" y2="755.1406"/><polygon fill="#A80036" points="648,780.2734,638,784.2734,648,788.2734,644,784.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642" x2="855" y1="784.2734" y2="784.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="654" y="779.2075">container $bar exited</text><polygon fill="#A80036" points="245.5,809.4063,235.5,813.4063,245.5,817.4063,241.5,813.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="239.5" x2="636" y1="813.4063" y2="813.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="251.5" y="808.3403">container $bar exited</text><polygon fill="#A80036" points="85.5,838.5391,75.5,842.5391,85.5,846.5391,81.5,842.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="233.5" y1="842.5391" y2="842.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="91.5" y="837.4731">container $bar exited</text><polygon fill="#A80036" points="476.5,874.6719,486.5,878.6719,476.5,882.6719,480.5,878.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74.5" x2="482.5" y1="878.6719" y2="878.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="81.5" y="873.606">stop VM $id</text><polygon fill="#A80036" points="758,903.8047,768,907.8047,758,911.8047,762,907.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="764" y1="907.8047" y2="907.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="495.5" y="902.7388">stop</text><!--
@startuml
participant orchestrator
participant containerd
participant snapshotter
participant "control plugin"


loop "for each container"
orchestrator -> containerd: prepare snapshot
containerd -> snapshotter: prepare snapshot
snapshotter - -> containerd: snapshot $foo
containerd - -> orchestrator: snapshot $foo
end

orchestrator -> "control plugin": create VM $id
create runtime
"control plugin" -> runtime: launch VM $id
create Firecracker
runtime -> Firecracker: launch
runtime -> Firecracker ++: configure & boot
create agent
runtime <-> agent: connect
"control plugin" - -> orchestrator: VM $id running

loop "for each container"
orchestrator -> containerd: run container\n$bar with\nsnapshot $foo
containerd -> runtime: run container $bar with snapshot $foo
runtime->Firecracker: attach snapshot\n$foo as device
runtime->agent: mount snapshot $foo
runtime->agent: run container $bar
create "container process"
agent->"container process": start process
activate "container process"
note left of "container process"
After some
time, container
process exits
end note
return
agent -> runtime: container $bar exited
runtime -> containerd: container $bar exited
containerd -> orchestrator: container $bar exited
end

orchestrator -> "control plugin": stop VM $id
"control plugin" -> Firecracker: stop
deactivate Firecracker
@enduml

PlantUML version 1.2019.05(Sat Apr 20 09:45:36 PDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b28
Operating System: Linux
OS Version: 4.15.0-50-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>